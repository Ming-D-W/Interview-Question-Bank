---
title: JavaScript ES6+篇
---

## 五、ES6+篇

本篇介绍ES6及之后版本的新特性，包括let/const、解构赋值、模板字符串、Set/Map等。

### let const

**var、let、const的区别：**

1. **作用域不同**
   - var声明的变量作用域是函数级别的
   - let和const声明的变量作用域是块级别的

2. **变量提升**
   - var声明的变量可以在声明之前访问，值为undefined
   - let和const声明的变量在声明之前访问会抛出ReferenceError

3. **重复声明**
   - var声明的变量可以被重复声明
   - let和const声明的变量不允许重复声明

4. **重新赋值**
   - let声明的变量可以被重新赋值
   - const声明的变量是不可变的，其值不能被重新赋值

5. **初始化要求**
   - const声明的变量必须在声明时初始化

详细说明请参考 [变量声明](#变量声明) 章节。

### Set&Map

**Set**

Set是ES6新增的数据结构，类似于数组，但成员的值都是唯一的，没有重复的值。

```js
// 创建Set
const set = new Set([1, 2, 3, 3, 4])
console.log(set) // Set(4) {1, 2, 3, 4}

// 常用方法
set.add(5) // 添加元素
set.delete(2) // 删除元素
set.has(3) // 判断是否包含某元素
set.clear() // 清空
set.size // 获取元素个数

// 遍历方法
set.forEach(value => console.log(value))
for (let item of set) {
  console.log(item)
}

// 应用：数组去重
const arr = [1, 2, 2, 3, 3, 4]
const uniqueArr = [...new Set(arr)] // [1, 2, 3, 4]
```

**Map**

Map是ES6新增的数据结构，类似于对象，但键可以是任意类型的值。

```js
// 创建Map
const map = new Map()

// 常用方法
map.set('name', '张三') // 设置键值对
map.set(123, '数字键')
map.set({}, '对象键')
map.get('name') // '张三' 获取值
map.has('name') // true 判断是否包含某键
map.delete('name') // 删除键值对
map.clear() // 清空
map.size // 获取键值对个数

// 遍历方法
map.forEach((value, key) => console.log(key, value))
for (let [key, value] of map) {
  console.log(key, value)
}
```

**Set和Map的区别：**
- Set是值的集合，Map是键值对的集合
- Set的值是唯一的，Map的键是唯一的
- Set用于数组去重，Map用于存储键值对

### 解构赋值

解构赋值是ES6新增的语法，可以从数组或对象中提取值，赋给变量。

**数组解构：**

```js
// 基本用法
const [a, b, c] = [1, 2, 3]
console.log(a, b, c) // 1 2 3

// 跳过某些值
const [x, , z] = [1, 2, 3]
console.log(x, z) // 1 3

// 剩余运算符
const [first, ...rest] = [1, 2, 3, 4, 5]
console.log(first) // 1
console.log(rest) // [2, 3, 4, 5]

// 默认值
const [a, b, c = 3] = [1, 2]
console.log(c) // 3

// 交换变量
let m = 1, n = 2;
[m, n] = [n, m]
console.log(m, n) // 2 1
```

**对象解构：**

```js
// 基本用法
const { name, age } = { name: '张三', age: 18 }
console.log(name, age) // '张三' 18

// 重命名
const { name: userName, age: userAge } = { name: '李四', age: 20 }
console.log(userName, userAge) // '李四' 20

// 默认值
const { name, age, gender = '男' } = { name: '王五', age: 22 }
console.log(gender) // '男'

// 嵌套解构
const user = {
  name: '赵六',
  info: {
    age: 25,
    address: '北京'
  }
}
const { name, info: { age, address } } = user
console.log(name, age, address) // '赵六' 25 '北京'

// 函数参数解构
function greet({ name, age }) {
  console.log(`我是${name}，今年${age}岁`)
}
greet({ name: '小明', age: 18 }) // '我是小明，今年18岁'
```

**字符串解构：**

```js
const [a, b, c] = 'hello'
console.log(a, b, c) // 'h' 'e' 'l'
```

### 模板字符串

模板字符串使用反引号（\`）包裹，可以包含占位符`${}`。

```js
// 基本用法
const name = '张三'
const age = 18
console.log(`我是${name}，今年${age}岁`) // '我是张三，今年18岁'

// 多行字符串
const message = `
  第一行
  第二行
  第三行
`

// 表达式计算
const a = 10, b = 20
console.log(`${a} + ${b} = ${a + b}`) // '10 + 20 = 30'

// 调用函数
function upper(str) {
  return str.toUpperCase()
}
console.log(`Hello ${upper('world')}`) // 'Hello WORLD'
```

### 扩展运算符

扩展运算符（...）可以将数组或对象展开。

```js
// 数组扩展
const arr1 = [1, 2, 3]
const arr2 = [...arr1, 4, 5, 6] // [1, 2, 3, 4, 5, 6]

// 数组合并
const arr3 = [1, 2]
const arr4 = [3, 4]
const merged = [...arr3, ...arr4] // [1, 2, 3, 4]

// 数组拷贝
const original = [1, 2, 3]
const copy = [...original] // [1, 2, 3]

// 对象扩展
const obj1 = { a: 1, b: 2 }
const obj2 = { ...obj1, c: 3 } // { a: 1, b: 2, c: 3 }

// 对象合并
const obj3 = { a: 1 }
const obj4 = { b: 2 }
const mergedObj = { ...obj3, ...obj4 } // { a: 1, b: 2 }

// 函数参数
function sum(...numbers) {
  return numbers.reduce((acc, cur) => acc + cur, 0)
}
sum(1, 2, 3, 4, 5) // 15
```

### for in & for of

**for...in**：遍历对象的可枚举属性（包括原型链上的属性）

```js
const obj = { a: 1, b: 2, c: 3 }
for (let key in obj) {
  console.log(key, obj[key]) // a 1, b 2, c 3
}
```

**for...of**：遍历可迭代对象的值（数组、字符串、Map、Set等）

```js
const arr = [1, 2, 3]
for (let value of arr) {
  console.log(value) // 1, 2, 3
}
```

**区别：**
- for...in遍历的是键名，for...of遍历的是键值
- for...in可以遍历对象，for...of不能遍历普通对象
- for...of可以使用break、continue、return
